(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46b176e8"],{"03ca":function(t,e,a){},1:function(t,e){},2:function(t,e){},3:function(t,e){},"405a":function(t,e,a){},"578b":function(t,e,a){},"6bed":function(t,e,a){"use strict";var n=a("7a3c"),i=a.n(n);i.a},"7a3c":function(t,e,a){},"8d41":function(t,e,a){},"9beb":function(t,e,a){"use strict";var n=a("578b"),i=a.n(n);i.a},ac79:function(t,e,a){"use strict";var n=a("e787"),i=a.n(n);i.a},b26a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-cascader",{staticClass:"filter-item",attrs:{options:t.selectedReportOptions,placeholder:"请选择报表类型","show-all-levels":!1},on:{change:t.handleSearchChange},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}}),t._v(" "),a("el-date-picker",{staticClass:"filter-item",attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2},model:{value:t.listQuery.date,callback:function(e){t.$set(t.listQuery,"date",e)},expression:"listQuery.date"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"全部线路",clearable:""},model:{value:t.listQuery.line,callback:function(e){t.$set(t.listQuery,"line",e)},expression:"listQuery.line"}},t._l(t.lineArray,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"全部车站",clearable:""},model:{value:t.listQuery.stationName,callback:function(e){t.$set(t.listQuery,"stationName",e)},expression:"listQuery.stationName"}},t._l(t.stationArray,(function(t){return a("el-option",{key:t.key,attrs:{label:t.value,value:t.value}})})),1),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",searchreport:t.SearchReport,icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("\n      查询\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"}},[t._v("\n      解算\n    ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:t.handleDownload}},[t._v("\n      导出\n    ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:t.print}},[t._v("\n      打印\n    ")])],1),t._v(" "),a("div",{staticClass:"table"},["transaction"==t.tableName?a("report-transaction",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"transaction",attrs:{tabledata:t.tableData,station:t.listQuery.stationName}}):t._e(),t._v(" "),"LCcheckBOMCashAudit"==t.tableName?a("LCcheckBOM-CashAudit",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"LCcheckBOMCashAudit",attrs:{station:t.listQuery.stationName}}):t._e(),t._v(" "),"LCcheckTVMCashAudit"==t.tableName?a("LCcheckTVM-CashAudit",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"LCcheckTVMCashAudit",attrs:{station:t.listQuery.stationName}}):t._e(),t._v(" "),"LCcheckAVMCashAudit"==t.tableName?a("LCcheckAVM-CashAudit",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"LCcheckAVMCashAudit",attrs:{station:t.listQuery.stationName}}):t._e(),t._v(" "),"LCcheckAbnormalFareAudit"==t.tableName?a("LCcheckAbnormal-FareAudit",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"LCcheckAbnormalFareAudit",attrs:{station:t.listQuery.stationName}}):t._e(),t._v(" "),"ConductorSettlementSheet"==t.tableName?a("Conductor-SettlementSheet",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"ConductorSettlementSheet",attrs:{station:t.listQuery.stationName}}):t._e()],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("iframe",{ref:"reportiframe",staticStyle:{width:"105%",border:"0","padding-left":"5%"},attrs:{id:"report-iframe",height:t.tableheight,"v-if":t.iframeshow,src:t.iframesrc}})])])},i=[],s=(a("8d41"),"@@wavesContext");function r(t,e){function a(a){var n=Object.assign({},e.value),i=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),s=i.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var r=s.getBoundingClientRect(),l=s.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(r.width,r.height)+"px",s.appendChild(l)),i.type){case"center":l.style.top=r.height/2-l.offsetHeight/2+"px",l.style.left=r.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-r.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-r.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=i.color,l.className="waves-ripple z-active",!1}}return t[s]?t[s].removeHandle=a:t[s]={removeHandle:a},a}var l={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[s].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[s].removeHandle,!1),t[s]=null,delete t[s]}},o=function(t){t.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(o)),l.install=o;var u=l,c=(a("6b54"),a("ac6a"),a("75fc")),d=(a("34ef"),a("1146")),p=a.n(d);function m(t,e){e&&(t+=1462);var a=Date.parse(t);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function h(t,e){for(var a={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}},i=0;i!=t.length;++i)for(var s=0;s!=t[i].length;++s){n.s.r>i&&(n.s.r=i),n.s.c>s&&(n.s.c=s),n.e.r<i&&(n.e.r=i),n.e.c<s&&(n.e.c=s);var r={v:t[i][s]};if(null!=r.v){var l=p.a.utils.encode_cell({c:s,r:i});"number"===typeof r.v?r.t="n":"boolean"===typeof r.v?r.t="b":r.v instanceof Date?(r.t="n",r.z=p.a.SSF._table[14],r.v=m(r.v)):r.t="s",a[l]=r}}return n.s.c<1e7&&(a["!ref"]=p.a.utils.encode_range(n)),a}function f(){if(!(this instanceof f))return new f;this.SheetNames=[],this.Sheets={}}function g(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),n=0;n!=t.length;++n)a[n]=255&t.charCodeAt(n);return e}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.multiHeader,a=void 0===e?[]:e,n=t.header,i=t.data,s=t.filename,r=t.merges,l=void 0===r?[]:r,o=t.autoWidth,u=void 0===o||o,d=t.bookType,m=void 0===d?"xlsx":d;s=s||"excel-list",i=Object(c["a"])(i),i.unshift(n);for(var v=a.length-1;v>-1;v--)i.unshift(a[v]);var b="SheetJS",y=new f,_=h(i);if(l.length>0&&(_["!merges"]||(_["!merges"]=[]),l.forEach((function(t){_["!merges"].push(p.a.utils.decode_range(t))}))),u){for(var w=i.map((function(t){return t.map((function(t){return null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length}:{wch:t.toString().length}}))})),A=w[0],k=1;k<w.length;k++)for(var S=0;S<w[k].length;S++)A[S]["wch"]<w[k][S]["wch"]&&(A[S]["wch"]=w[k][S]["wch"]);_["!cols"]=A}y.SheetNames.push(b),y.Sheets[b]=_;var x=p.a.write(y,{bookType:m,bookSST:!1,type:"binary"});saveAs(new Blob([g(x)],{type:"application/octet-stream"}),"".concat(s,".").concat(m))}a("0fd4");var b=a("b775"),y=a("83d6"),_=a.n(y);function w(t){return Object(b["a"])({url:_.a.apiurl+"/api/Menu/QueryReportClassification",method:"get",params:t})}var A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{id:"complex-table",data:t.list,border:"",height:t.tableheight,fit:"",fixed:"","show-summary":"","summary-method":t.getSummaries,"span-method":t.listSpanMethod,"row-class-name":t.tableRowClassName},on:{"sort-change":t.sortChange}},[t._v("\n    >\n    "),t._v(" "),a("el-table-column",{attrs:{label:"车站名称",width:"110px",align:"center",fixed:"left",prop:"stationName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stationName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上传日期",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uploadtimestamp||e.row.total))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作时间",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.operatetimestamp))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作员姓名",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.operator))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作员编号",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.operatornum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"设备编码",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.devicenum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"卡号",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cardnum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"卡发行商",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CardIssuer))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票卡类型",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CardType||""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"卡内余额/余次",width:"110px",align:"center",prop:"CardBalance"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CardBalance||e.row.totalupscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作金额/次数",width:"110px",align:"center",prop:"OperatingAmount"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.OperatingAmount||e.row.totaldownscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作后余额/余次",width:"110px",align:"center",prop:"AfterOperatingAmount"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterOperatingAmount||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"交易类别",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.TransactionType))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"更新原因",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.UpdateRearson))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"支付类别",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.PayType))])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"Type",prop:"type"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:t.temp.type,callback:function(e){t.$set(t.temp,"type",e)},expression:"temp.type"}},t._l(t.calendarTypeOptions,(function(t){return a("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Date",prop:"timestamp"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"Please pick a date"},model:{value:t.temp.timestamp,callback:function(e){t.$set(t.temp,"timestamp",e)},expression:"temp.timestamp"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Title",prop:"title"}},[a("el-input",{model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Status"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:t.temp.status,callback:function(e){t.$set(t.temp,"status",e)},expression:"temp.status"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Imp"}},[a("el-rate",{staticStyle:{"margin-top":"8px"},attrs:{colors:["#99A9BF","#F7BA2A","#FF9900"],max:3},model:{value:t.temp.importance,callback:function(e){t.$set(t.temp,"importance",e)},expression:"temp.importance"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Remark"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"Please input"},model:{value:t.temp.remark,callback:function(e){t.$set(t.temp,"remark",e)},expression:"temp.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        Cancel\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("\n        Confirm\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogPvVisible,title:"Reading statistics"},on:{"update:visible":function(e){t.dialogPvVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.pvData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"key",label:"Channel"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pv",label:"Pv"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogPvVisible=!1}}},[t._v("Confirm")])],1)],1)],1)},k=[];a("ac4d"),a("8a81"),a("c5f6"),a("6762"),a("2fdb");function S(t){return Object(b["a"])({url:"/ReportTransaction/list",method:"get",params:t})}function x(t){return Object(b["a"])({url:"/ReportTransaction/create",method:"post",data:t})}function C(t){return Object(b["a"])({url:"/ReportTransaction/update",method:"post",data:t})}var N=a("ed08"),L=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],D={name:"ReportTransaction",directives:{waves:u,mergerows:{update:function(t){console.log(t)}}},props:{tabledata:{default:"",type:String},station:{default:"",type:String}},data:function(){return{spanArr:[],indexArr:[],pos:0,tableheight:800,screenWidth:document.body.clientWidth,screeHeight:document.body.clientHeight,num:1,printObj:{id:"complex-table",popTitle:"good print"},tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id",stationName:this.station,date:void 0},importanceOptions:[1,2,3],calendarTypeOptions:L,sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"新增"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},created:function(){this.tableheight=this.screeHeight-180,this.getList()},mounted:function(){},methods:{handleDownload:function(){var t=["timestamp","title","type","importance","status"],e=["timestamp","title","type","importance","status"],a=this.formatJson(e,this.list);v({header:t,data:a,filename:"table-list"}),this.downloadLoading=!1},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"timestamp"===t?Object(N["f"])(e[t]):e[t]}))}))},tableRowClassName:function(t){var e=t.row;t.rowIndex;return"合计"===e.total?"success-row":""},tableDatas:function(t){this.spanArr=[];for(var e=0;e<t.length;e++)0===e?(this.spanArr.push(1),this.pos=0):t[e].stationName===t[e-1].stationName?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=e);console.log(this.spanArr)},listSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(this.indexArr.includes(e)){if(1===a)return{rowspan:1,colspan:8};if(a>0&&a<9)return{rowspan:0,colspan:0}}if(0===a){var n=this.spanArr[e],i=n>0?1:0;return{rowspan:n,colspan:i}}},getSummaries:function(t){var e=t.columns,a=t.data,n=[];return e.forEach((function(t,e){if(0!==e){var i=a.map((function(e){return Number(e[t.property])}));i.every((function(t){return isNaN(t)}))||(n[e]=i.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),n[e]=n[e].toFixed(2),n[e]+=" 元")}else n[e]="总计"})),n},getList:function(){var t=this;console.log(this.listQuery),this.listQuery.date&&(this.listQuery.date[0]=new Date(this.listQuery.date[0]).getTime(),this.listQuery.date[1]=new Date(this.listQuery.date[1]).getTime()),S(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.tableDatas(t.list),t.indexArr=[],t.list.map((function(e,a,n){"合计"===e.total&&t.indexArr.push(a)})),setTimeout((function(){t.listLoading=!1}),300)}))},handleFilter:function(t){this.listQuery=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作Success",type:"success"}),t.status=e},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},createData:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&(t.temp.id=parseInt(100*Math.random())+1024,t.temp.author="vue-element-admin",x(t.temp).then((function(){t.list.unshift(t.temp),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3})})))}))},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},updateData:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a=Object.assign({},t.temp);a.timestamp=+new Date(a.timestamp),C(a).then((function(){var e=!0,a=!1,n=void 0;try{for(var i,s=t.list[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var r=i.value;if(r.id===t.temp.id){var l=t.list.indexOf(r);t.list.splice(l,1,t.temp);break}}}catch(o){a=!0,n=o}finally{try{e||null==s.return||s.return()}finally{if(a)throw n}}t.dialogFormVisible=!1,t.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}))}}))}}},O=D,T=(a("eaa2"),a("2877")),Q=Object(T["a"])(O,A,k,!1,null,null,null),B=Q.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{id:"complex-table",data:t.list,border:"",height:t.tableheight,fit:"",fixed:"","show-summary":"","summary-method":t.getSummaries,"span-method":t.listSpanMethod,"row-class-name":t.tableRowClassName},on:{"sort-change":t.sortChange}},[t._v("\n    >\n    "),t._v(" "),a("el-table-column",{attrs:{label:"车站名称",align:"center",fixed:"left",prop:"stationName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stationName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"日期",width:"170px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.operatetimestamp||e.row.total))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"售票员",width:"300px",align:"center"}},[a("el-table-column",{attrs:{label:"编号",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.operatornum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.operator))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"审核前",align:"center",prop:"CardBalance"}},[a("el-table-column",{attrs:{label:"应收金额",align:"center",prop:"BeforeAuditAR"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditAR||e.row.totalupscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实收金额",align:"center",prop:"BeforeAuditPC"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditPC||e.row.totaldownscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"现金实收金额",align:"center",prop:"BeforeAuditPCCash"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditPCCash||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"POS支付金额",align:"center",prop:"BeforeAuditPCPOS"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditPCPOS||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"长款",align:"center",prop:"BeforeAuditLong"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditLong||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"短款",align:"center",prop:"BeforeAuditShort"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditShort||e.row.totalmoney))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"审核后",align:"center",prop:"CardBalance"}},[a("el-table-column",{attrs:{label:"应收金额",align:"center",prop:"AfterAuditAR"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditAR||e.row.totalupscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实收金额",align:"center",prop:"AfterAuditPC"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditPC||e.row.totaldownscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"现金实收金额",align:"center",prop:"AfterAuditPCCash"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditPCCash||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"POS支付金额",align:"center",prop:"AfterAuditPCPOS"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditPCPOS||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"长款",align:"center",prop:"AfterAuditLong"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditLong||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"短款",align:"center",prop:"AfterAuditShort"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditShort||e.row.totalmoney))])]}}])})],1)],1),t._v(" "),t._m(0)],1)},M=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table_person"},[t._v("\n    核对人: 小明"),a("br"),t._v("\n    复核人: 小张\n  ")])}];function V(t){return Object(b["a"])({url:"/LCcheckBOMCashAudit/list",method:"get",params:t})}var R=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],P={name:"LCcheckBOMCashAudit",directives:{waves:u,mergerows:{update:function(t){console.log(t)}}},props:{station:{default:"",type:String}},data:function(){return{spanArr:[],indexArr:[],pos:0,tableheight:800,screenWidth:document.body.clientWidth,screeHeight:document.body.clientHeight,num:1,printObj:{id:"complex-table",popTitle:"good print"},tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id",stationName:this.station,date:void 0},importanceOptions:[1,2,3],calendarTypeOptions:R,sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"新增"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},created:function(){this.tableheight=this.screeHeight-180,this.getList()},mounted:function(){},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return"合计"===e.total?"success-row":""},tableDatas:function(t){this.spanArr=[];for(var e=0;e<t.length;e++)0===e?(this.spanArr.push(1),this.pos=0):t[e].stationName===t[e-1].stationName?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=e);console.log(this.spanArr)},listSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(this.indexArr.includes(e)){if(1===a)return{rowspan:1,colspan:3};if(a>0&&a<4)return{rowspan:0,colspan:0}}if(0===a){var n=this.spanArr[e],i=n>0?1:0;return{rowspan:n,colspan:i}}},getSummaries:function(t){var e=t.columns,a=t.data,n=[];return e.forEach((function(t,e){if(0!==e){var i=a.map((function(e){return Number(e[t.property])}));i.every((function(t){return isNaN(t)}))||(n[e]=i.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),n[e]=n[e].toFixed(2))}else n[e]="总计"})),n},getList:function(){var t=this;console.log(this.listQuery),this.listQuery.date&&(this.listQuery.date[0]=new Date(this.listQuery.date[0]).getTime(),this.listQuery.date[1]=new Date(this.listQuery.date[1]).getTime()),V(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.tableDatas(t.list),t.indexArr=[],t.list.map((function(e,a,n){"合计"===e.total&&t.indexArr.push(a)})),setTimeout((function(){t.listLoading=!1}),300)}))},handleFilter:function(t){this.listQuery=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作Success",type:"success"}),t.status=e},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))}}},$=P,I=(a("ac79"),Object(T["a"])($,F,M,!1,null,null,null)),j=I.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{id:"complex-table",data:t.list,border:"",height:t.tableheight,fit:"",fixed:"","show-summary":"","summary-method":t.getSummaries,"span-method":t.listSpanMethod,"row-class-name":t.tableRowClassName},on:{"sort-change":t.sortChange}},[t._v("\n    >\n    "),t._v(" "),a("el-table-column",{attrs:{label:"车站名称",align:"center",fixed:"left",prop:"stationName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stationName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"起始日期",width:"170px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.StartDate||e.row.total))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"清点日期",width:"170px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CheckDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"TVM编号",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.TVMNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"清点人",width:"300px",align:"center"}},[a("el-table-column",{attrs:{label:"编号",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cpNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cpName))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"审核前",align:"center",prop:"CardBalance"}},[a("el-table-column",{attrs:{label:"应收金额",align:"center",prop:"BeforeAuditAR"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditAR||e.row.totalupscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实收金额",align:"center",prop:"BeforeAuditPC"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditPC||e.row.totaldownscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"长款",align:"center",prop:"BeforeAuditLong"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditLong||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"短款",align:"center",prop:"BeforeAuditShort"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditShort||e.row.totalmoney))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"审核后",align:"center",prop:"CardBalance"}},[a("el-table-column",{attrs:{label:"应收金额",align:"center",prop:"AfterAuditAR"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditAR||e.row.totalupscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实收金额",align:"center",prop:"AfterAuditPC"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditPC||e.row.totaldownscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"长款",align:"center",prop:"AfterAuditLong"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditLong||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"短款",align:"center",prop:"AfterAuditShort"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditShort||e.row.totalmoney))])]}}])})],1)],1),t._v(" "),t._m(0)],1)},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table_person"},[t._v("\n    核对人: 小明"),a("br"),t._v("\n    复核人: 小张\n  ")])}];function H(t){return Object(b["a"])({url:"/LCcheckTVMCashAudit/list",method:"get",params:t})}var U=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],J={name:"LCcheckTVMCashAudit",directives:{waves:u,mergerows:{update:function(t){console.log(t)}}},props:{station:{default:"",type:String}},data:function(){return{spanArr:[],indexArr:[],pos:0,tableheight:800,screenWidth:document.body.clientWidth,screeHeight:document.body.clientHeight,num:1,printObj:{id:"complex-table",popTitle:"good print"},tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id",stationName:this.station,date:void 0},importanceOptions:[1,2,3],calendarTypeOptions:U,sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"新增"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},created:function(){this.tableheight=this.screeHeight-180,this.getList()},mounted:function(){},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return"合计"===e.total?"success-row":""},tableDatas:function(t){this.spanArr=[];for(var e=0;e<t.length;e++)0===e?(this.spanArr.push(1),this.pos=0):t[e].stationName===t[e-1].stationName?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=e);console.log(this.spanArr)},listSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(this.indexArr.includes(e)){if(1===a)return{rowspan:1,colspan:3};if(a>0&&a<4)return{rowspan:0,colspan:0}}if(0===a){var n=this.spanArr[e],i=n>0?1:0;return{rowspan:n,colspan:i}}},getSummaries:function(t){var e=t.columns,a=t.data,n=[];return e.forEach((function(t,e){if(0!==e){var i=a.map((function(e){return Number(e[t.property])}));i.every((function(t){return isNaN(t)}))||(n[e]=i.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),n[e]=n[e].toFixed(2))}else n[e]="总计"})),n},getList:function(){var t=this;console.log(this.listQuery),this.listQuery.date&&(this.listQuery.date[0]=new Date(this.listQuery.date[0]).getTime(),this.listQuery.date[1]=new Date(this.listQuery.date[1]).getTime()),H(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.tableDatas(t.list),t.indexArr=[],t.list.map((function(e,a,n){"合计"===e.total&&t.indexArr.push(a)})),setTimeout((function(){t.listLoading=!1}),300)}))},handleFilter:function(t){this.listQuery=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作Success",type:"success"}),t.status=e},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))}}},W=J,K=(a("6bed"),Object(T["a"])(W,E,q,!1,null,null,null)),z=K.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{id:"complex-table",data:t.list,border:"",height:t.tableheight,fit:"",fixed:"","show-summary":"","summary-method":t.getSummaries,"span-method":t.listSpanMethod,"row-class-name":t.tableRowClassName},on:{"sort-change":t.sortChange}},[t._v("\n    >\n    "),t._v(" "),a("el-table-column",{attrs:{label:"车站名称",align:"center",fixed:"left",prop:"stationName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stationName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"起始日期",width:"170px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.StartDate||e.row.total))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"清点日期",width:"170px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CheckDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"AVM编号",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.TVMNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"清点人",width:"300px",align:"center"}},[a("el-table-column",{attrs:{label:"编号",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cpNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cpName))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"审核前",align:"center",prop:"CardBalance"}},[a("el-table-column",{attrs:{label:"应收金额",align:"center",prop:"BeforeAuditAR"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditAR||e.row.totalupscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实收金额",align:"center",prop:"BeforeAuditPC"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditPC||e.row.totaldownscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"长款",align:"center",prop:"BeforeAuditLong"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditLong||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"短款",align:"center",prop:"BeforeAuditShort"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BeforeAuditShort||e.row.totalmoney))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"审核后",align:"center",prop:"CardBalance"}},[a("el-table-column",{attrs:{label:"应收金额",align:"center",prop:"AfterAuditAR"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditAR||e.row.totalupscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实收金额",align:"center",prop:"AfterAuditPC"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditPC||e.row.totaldownscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"长款",align:"center",prop:"AfterAuditLong"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditLong||e.row.totalmoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"短款",align:"center",prop:"AfterAuditShort"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.AfterAuditShort||e.row.totalmoney))])]}}])})],1)],1),t._v(" "),t._m(0)],1)},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table_person"},[t._v("\n    核对人: 小明"),a("br"),t._v("\n    复核人: 小张\n  ")])}];function G(t){return Object(b["a"])({url:"/LCcheckAVMCashAudit/list",method:"get",params:t})}var Z=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],tt={name:"LCcheckAVMCashAudit",directives:{waves:u,mergerows:{update:function(t){console.log(t)}}},props:{station:{default:"",type:String}},data:function(){return{spanArr:[],indexArr:[],pos:0,tableheight:800,screenWidth:document.body.clientWidth,screeHeight:document.body.clientHeight,num:1,printObj:{id:"complex-table",popTitle:"good print"},tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id",stationName:this.station,date:void 0},importanceOptions:[1,2,3],calendarTypeOptions:Z,sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"新增"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},created:function(){this.tableheight=this.screeHeight-180,this.getList()},mounted:function(){},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return"合计"===e.total?"success-row":""},tableDatas:function(t){this.spanArr=[];for(var e=0;e<t.length;e++)0===e?(this.spanArr.push(1),this.pos=0):t[e].stationName===t[e-1].stationName?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=e);console.log(this.spanArr)},listSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(this.indexArr.includes(e)){if(1===a)return{rowspan:1,colspan:3};if(a>0&&a<4)return{rowspan:0,colspan:0}}if(0===a){var n=this.spanArr[e],i=n>0?1:0;return{rowspan:n,colspan:i}}},getSummaries:function(t){var e=t.columns,a=t.data,n=[];return e.forEach((function(t,e){if(0!==e){var i=a.map((function(e){return Number(e[t.property])}));i.every((function(t){return isNaN(t)}))||(n[e]=i.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),n[e]=n[e].toFixed(2))}else n[e]="总计"})),n},getList:function(){var t=this;console.log(this.listQuery),this.listQuery.date&&(this.listQuery.date[0]=new Date(this.listQuery.date[0]).getTime(),this.listQuery.date[1]=new Date(this.listQuery.date[1]).getTime()),G(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.tableDatas(t.list),t.indexArr=[],t.list.map((function(e,a,n){"合计"===e.total&&t.indexArr.push(a)})),setTimeout((function(){t.listLoading=!1}),300)}))},handleFilter:function(t){this.listQuery=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作Success",type:"success"}),t.status=e},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))}}},et=tt,at=(a("f7b3"),Object(T["a"])(et,X,Y,!1,null,null,null)),nt=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{id:"complex-table",data:t.list,border:"",height:t.tableheight,fit:"",fixed:"","show-summary":"","summary-method":t.getSummaries,"span-method":t.listSpanMethod,"row-class-name":t.tableRowClassName},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{label:"车站名称",align:"center",fixed:"left",prop:"stationName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stationName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作员",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.operatorNum+n.operatorName||n.total))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"设备号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.devicenum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票款类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ticketType))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"金额",align:"center",prop:"amount"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.amount||e.row.totalupscan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"审核后金额",align:"center",prop:"auditamount"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.auditamount||e.row.totalupscan))])]}}])}),t._v(" "),t.columnsShow.auditamount2?a("el-table-column",{attrs:{label:"审核后金额2",align:"center",prop:"auditamount"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.auditamount2))])]}}],null,!1,1871919317)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"审核差异",align:"center",prop:"auditdifferamount"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.auditdifferamount||e.row.totalupscan))])]}}])})],1),t._v(" "),t._m(0)],1)},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table_person"},[t._v("\n    核对人: 小明"),a("br"),t._v("\n    复核人: 小张\n  ")])}];function rt(t){return Object(b["a"])({url:"/LCcheckAbnormalFareAudit/list",method:"get",params:t})}var lt=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],ot={name:"LCcheckAbnormalFareAudit",directives:{waves:u,mergerows:{update:function(t){console.log(t)}}},props:{station:{default:"",type:String}},data:function(){return{columnsShow:{auditamount2:!1},spanArr:[],indexArr:[],pos:0,tableheight:800,screenWidth:document.body.clientWidth,screeHeight:document.body.clientHeight,num:1,printObj:{id:"complex-table",popTitle:"good print"},tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id",stationName:this.station,date:void 0},importanceOptions:[1,2,3],calendarTypeOptions:lt,sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"新增"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},created:function(){this.tableheight=this.screeHeight-180,this.getList()},mounted:function(){},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return"合计"===e.total?"success-row":""},tableDatas:function(t){this.spanArr=[];for(var e=0;e<t.length;e++)0===e?(this.spanArr.push(1),this.pos=0):t[e].stationName===t[e-1].stationName?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=e);console.log(this.spanArr)},listSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(this.indexArr.includes(e)){if(1===a)return{rowspan:1,colspan:3};if(a>0&&a<4)return{rowspan:0,colspan:0}}if(0===a){var n=this.spanArr[e],i=n>0?1:0;return{rowspan:n,colspan:i}}},getSummaries:function(t){var e=t.columns,a=t.data,n=[];return e.forEach((function(t,e){if(0!==e){var i=a.map((function(e){return Number(e[t.property])}));i.every((function(t){return isNaN(t)}))||(n[e]=i.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),n[e]=n[e].toFixed(2))}else n[e]="总计"})),n},getList:function(){var t=this;console.log(this.listQuery),this.listQuery.date&&(this.listQuery.date[0]=new Date(this.listQuery.date[0]).getTime(),this.listQuery.date[1]=new Date(this.listQuery.date[1]).getTime()),rt(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.tableDatas(t.list),t.indexArr=[],t.list.map((function(e,a,n){"合计"===e.total&&t.indexArr.push(a)})),t.list.forEach((function(e){e.hasOwnProperty("auditamount2")&&t.columnsShow.auditamount2})),setTimeout((function(){t.listLoading=!1}),300)}))},handleFilter:function(t){this.listQuery=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作Success",type:"success"}),t.status=e},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))}}},ut=ot,ct=(a("9beb"),Object(T["a"])(ut,it,st,!1,null,null,null)),dt=ct.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("iframe",{staticStyle:{width:"100%",border:"0","padding-left":"5%"},attrs:{id:"print-iframe",height:t.tableheight,type:"application/x-google-chrome-sheet",src:"http://172.23.120.83:5000/reports/补短款统计日报Fill.html"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.print}},[t._v("\n    打印\n  ")])],1)},mt=[];function ht(t){return Object(b["a"])({url:"/ConductorSettlementSheet/list",method:"get",params:t})}var ft=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],gt={name:"LCcheckAbnormalFareAudit",directives:{waves:u,mergerows:{update:function(t){console.log(t)}}},props:{station:{default:"",type:String}},data:function(){return{fileList:[],iframesrc:"",columnsShow:{auditamount2:!1},spanArr:[],indexArr:[],pos:0,tableheight:800,screenWidth:document.body.clientWidth,screeHeight:document.body.clientHeight,num:1,printObj:{id:"complex-table",popTitle:"good print"},tableKey:0,list:null,list2:null,total:0,listLoading:!0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id",stationName:this.station,date:void 0},importanceOptions:[1,2,3],calendarTypeOptions:ft,sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"新增"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},created:function(){this.tableheight=this.screeHeight-180,this.getList(),this.iframesrc=_.a.base64},mounted:function(){},methods:{print:function(){window.print()},tableRowClassName:function(t){var e=t.row;t.rowIndex;return"合计"===e.total?"success-row":""},tableDatas:function(t){this.spanArr=[];for(var e=0;e<t.length;e++)0===e?(this.spanArr.push(1),this.pos=0):t[e].id===t[e-1].id?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=e);console.log(this.spanArr)},listSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(this.indexArr.includes(e)){if(1===a)return{rowspan:1,colspan:3};if(a>0&&a<4)return{rowspan:0,colspan:0}}if(0===a){var n=this.spanArr[e],i=n>0?1:0;return{rowspan:n,colspan:i}}},getSummaries:function(t){var e=t.columns,a=t.data,n=[];return e.forEach((function(t,e){if(0!==e){var i=a.map((function(e){return Number(e[t.property])}));i.every((function(t){return isNaN(t)}))||(n[e]=i.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),n[e]=n[e].toFixed(2))}else n[e]="总计"})),n},getList:function(){var t=this;console.log(this.listQuery),this.listQuery.date&&(this.listQuery.date[0]=new Date(this.listQuery.date[0]).getTime(),this.listQuery.date[1]=new Date(this.listQuery.date[1]).getTime()),ht(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.tableDatas(t.list),t.indexArr=[],t.list.map((function(e,a,n){"合计"===e.total&&t.indexArr.push(a)})),t.list.forEach((function(e){e.hasOwnProperty("auditamount2")&&t.columnsShow.auditamount2})),setTimeout((function(){t.listLoading=!1}),300)}))},handleFilter:function(t){this.listQuery=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作Success",type:"success"}),t.status=e},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))}}},vt=gt,bt=(a("ffa5"),Object(T["a"])(vt,pt,mt,!1,null,null,null)),yt=bt.exports,_t=[{value:"LC报表",label:"LC报表",children:[{value:"1",label:"补短款统计日报"}]},{value:"交易类报表",label:"交易类报表",children:[{value:"transaction",label:"BOM与TVM交易明细报表"}]},{value:"SC报表",label:"SC报表",children:[{value:"ConductorSettlementSheet",label:"售票员结算单"}]},{value:"LC核对报表",label:"LC核对报表",children:[{value:"LCcheckBOMCashAudit",label:"BOM现金审核汇总表"},{value:"LCcheckTVMCashAudit",label:"TVM现金审核汇总表"},{value:"LCcheckAVMCashAudit",label:"AVM现金审核汇总表"},{value:"LCcheckAbnormalFareAudit",label:"异常票款审核汇总表"},{value:"补短款审核汇总表",label:"补短款审核汇总表"},{value:"车站营收日报审核汇总表",label:"车站营收日报审核汇总表"},{value:"报表、票款差错统计表",label:"报表、票款差错统计表"}]}],wt=[{key:0,value:"智慧城站"},{key:1,value:"体育西路站"},{key:2,value:"天河公园站"}],At=[{value:0,label:"石家庄1号线",children:[]},{value:1,label:"石家庄2号线",children:[]},{value:2,label:"石家庄3号线",children:[]}],kt=[{id:1,tablename:"transaction"}],St={selectedReportOptions:_t,stationArray:wt,lineArray:At,tableArray:kt},xt={name:"Report",components:{ReportTransaction:B,LCcheckBOMCashAudit:j,LCcheckTVMCashAudit:z,LCcheckAVMCashAudit:nt,LCcheckAbnormalFareAudit:dt,ConductorSettlementSheet:yt},directives:{waves:u},data:function(){return{exec_obj:void 0,tableheight:800,screeHeight:document.body.clientHeight,iframe:void 0,iframesrc:"",iframeshow:!1,pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}},{text:"最近一年",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-31536e6),t.$emit("pick",[a,e])}},{text:"最近三年",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-94608e6),t.$emit("pick",[a,e])}}]},daterange:"",selectReportName:"",selectedReportOptions:[],selectedOptions:[],stationArray:St.stationArray,lineArray:St.lineArray,searchdata:{date:new Date,station:""},tableData:"",tableName:"",SearchReport:"",listLoading:!0,listQuery:{line:"",stationName:"",date:null},downloadLoading:!1}},created:function(){var t=this;w().then((function(e){t.selectedReportOptions=e.data,t.selectedReportOptions.length>0&&(t.selectedOptions=[t.selectedReportOptions[0].value,t.selectedReportOptions[0].children[0].value],t.iframeshow=!0,t.getList())})),this.keyupSubmit(),this.tableheight=this.screeHeight-160},mounted:function(){},methods:{keyupSubmit:function(){var t=this;document.onkeydown=function(e){var a=window.event.keyCode;13===a&&t.handleFilter()}},print:function(){var t=this,e=window.open("","newwindow","height=1500, width=1200, top=100, left=100, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=n o, status=no");this.exec_obj=document.createElement("iframe"),this.exec_obj.name="tmp_frame",this.exec_obj.id="tmp_frame",this.exec_obj.style="height:100%;width:100%;border:0",this.exec_obj.src=this.iframesrc,e.document.body.append(this.exec_obj),setTimeout((function(){e.document.body.style.height=2*t.exec_obj.offsetHeight,e.window.print()}),800)},handleSearchChange:function(t){this.listQuery.date=null,this.listQuery.line="",this.listQuery.stationName="",this.tableName=t[1]},getList:function(){var t=this;this.listLoading=!0,setTimeout((function(){t.iframesrc=_.a.apiurl+"/reports/售票员结算单Fill.html",t.listLoading=!1}),500)},handleFilter:function(){var t=this;this.listLoading=!0,setTimeout((function(){t.listLoading=!1}),300)},handleDownload:function(){switch(this.tableName){case"transactionShow":this.$refs.ReportTransaction.handleDownload();break}var t=["timestamp","title","type","importance","status"],e=["timestamp","title","type","importance","status"],a=this.formatJson(e,this.list);v({header:t,data:a,filename:"table-list"}),this.downloadLoading=!1}}},Ct=xt,Nt=Object(T["a"])(Ct,n,i,!1,null,null,null);e["default"]=Nt.exports},d0f5:function(t,e,a){},e787:function(t,e,a){},eaa2:function(t,e,a){"use strict";var n=a("03ca"),i=a.n(n);i.a},f7b3:function(t,e,a){"use strict";var n=a("405a"),i=a.n(n);i.a},ffa5:function(t,e,a){"use strict";var n=a("d0f5"),i=a.n(n);i.a}}]);